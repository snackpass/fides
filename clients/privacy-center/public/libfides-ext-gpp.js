class ge{eventName;listenerId;data;pingData;constructor(e,t,n,i){this.eventName=e,this.listenerId=t,this.data=n,this.pingData=i}}class ae{gppVersion;cmpStatus;cmpDisplayStatus;signalStatus;supportedAPIs;cmpId;sectionList;applicableSections;gppString;parsedSections;constructor(e){this.gppVersion=e.gppVersion,this.cmpStatus=e.cmpStatus,this.cmpDisplayStatus=e.cmpDisplayStatus,this.signalStatus=e.signalStatus,this.supportedAPIs=e.supportedAPIs,this.cmpId=e.cmpId,this.sectionList=e.gppModel.getSectionIds(),this.applicableSections=e.applicableSections,this.gppString=e.gppModel.encode(),this.parsedSections=e.gppModel.toObject()}}class ${callback;parameter;success=!0;cmpApiContext;constructor(e,t,n){this.cmpApiContext=e,Object.assign(this,{callback:t,parameter:n})}execute(){try{return this.respond()}catch{return this.invokeCallback(null),null}}invokeCallback(e){const t=e!==null;this.callback&&this.callback(e,t)}}class je extends ${respond(){let e=this.cmpApiContext.eventQueue.add({callback:this.callback,parameter:this.parameter}),t=new ge("listenerRegistered",e,!0,new ae(this.cmpApiContext));this.invokeCallback(t)}}class Qe extends ${respond(){let e=new ae(this.cmpApiContext);this.invokeCallback(e)}}class $e extends ${respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>.<field> parameter required");let e=this.parameter.split(".");if(e.length!=2)throw new Error("Field name must be in the format <section>.<fieldName>");let t=e[0],n=e[1],i=this.cmpApiContext.gppModel.getFieldValue(t,n);this.invokeCallback(i)}}class Xe extends ${respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section> parameter required");let e=null;this.cmpApiContext.gppModel.hasSection(this.parameter)&&(e=this.cmpApiContext.gppModel.getSection(this.parameter)),this.invokeCallback(e)}}class qe extends ${respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>[.version] parameter required");let e=this.cmpApiContext.gppModel.hasSection(this.parameter);this.invokeCallback(e)}}var y;(function(s){s.ADD_EVENT_LISTENER="addEventListener",s.GET_FIELD="getField",s.GET_SECTION="getSection",s.HAS_SECTION="hasSection",s.PING="ping",s.REMOVE_EVENT_LISTENER="removeEventListener"})(y||(y={}));class ze extends ${respond(){let e=this.parameter,t=this.cmpApiContext.eventQueue.remove(e),n=new ge("listenerRemoved",e,t,new ae(this.cmpApiContext));this.invokeCallback(n)}}class Ie{static[y.ADD_EVENT_LISTENER]=je;static[y.GET_FIELD]=$e;static[y.GET_SECTION]=Xe;static[y.HAS_SECTION]=qe;static[y.PING]=Qe;static[y.REMOVE_EVENT_LISTENER]=ze}var X;(function(s){s.STUB="stub",s.LOADING="loading",s.LOADED="loaded",s.ERROR="error"})(X||(X={}));var Y;(function(s){s.VISIBLE="visible",s.HIDDEN="hidden",s.DISABLED="disabled"})(Y||(Y={}));var Ae;(function(s){s.GPP_LOADED="gpploaded",s.CMP_UI_SHOWN="cmpuishown",s.USER_ACTION_COMPLETE="useractioncomplete"})(Ae||(Ae={}));var x;(function(s){s.NOT_READY="not ready",s.READY="ready"})(x||(x={}));class Je{callQueue;customCommands;cmpApiContext;constructor(e,t){if(this.cmpApiContext=e,t){let n=y.ADD_EVENT_LISTENER;if(t?.[n])throw new Error(`Built-In Custom Commmand for ${n} not allowed`);if(n=y.REMOVE_EVENT_LISTENER,t?.[n])throw new Error(`Built-In Custom Commmand for ${n} not allowed`);this.customCommands=t}try{this.callQueue=window.__gpp()||[]}catch{this.callQueue=[]}finally{window.__gpp=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(e,t,n,i){if(typeof e!="string")t(null,!1);else{if(t&&typeof t!="function")throw new Error("invalid callback function");this.isCustomCommand(e)?this.customCommands[e](t,n):this.isBuiltInCommand(e)?new Ie[e](this.cmpApiContext,t,n).execute():t&&t(null,!1)}}purgeQueuedCalls(){const e=this.callQueue;this.callQueue=[],e.forEach(t=>{window.__gpp(...t)})}isCustomCommand(e){return this.customCommands&&typeof this.customCommands[e]=="function"}isBuiltInCommand(e){return Ie[e]!==void 0}}class Ze{eventQueue=new Map;queueNumber=1e3;cmpApiContext;constructor(e){this.cmpApiContext=e;try{let n=window.__gpp("events")||[];for(var t=0;t<n.length;t++){let i=n[t];this.eventQueue.set(i.id,{callback:i.callback,parameter:i.parameter})}}catch(n){console.log(n)}}add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}get(e){return this.eventQueue.get(e)}remove(e){return this.eventQueue.delete(e)}exec(e,t){this.eventQueue.forEach((n,i)=>{let r=new ge(e,i,t,new ae(this.cmpApiContext)),o=!0;n.callback(r,o)})}clear(){this.queueNumber=1e3,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class P extends Error{constructor(e){super(e),this.name="DecodingError"}}class h{static encode(e,t){let n=[];if(e>=1)for(n.push(1);e>=n[0]*2;)n.unshift(n[0]*2);let i="";for(let r=0;r<n.length;r++){let o=n[r];e>=o?(i+="1",e-=o):i+="0"}for(;i.length<t;)i="0"+i;return i}static decode(e){if(!/^[0-1]*$/.test(e))throw new P("Undecodable FixedInteger '"+e+"'");let t=0,n=[];for(let i=0;i<e.length;i++)i===0?n[e.length-(i+1)]=1:n[e.length-(i+1)]=n[e.length-i]*2;for(let i=0;i<e.length;i++)e.charAt(i)==="1"&&(t+=n[i]);return t}}class Se extends Error{constructor(e){super(e),this.name="EncodingError"}}class oe{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);encode(e){if(!/^[0-1]*$/.test(e))throw new Se("Unencodable Base64Url '"+e+"'");e=this.pad(e);let t="",n=0;for(;n<=e.length-6;){let i=e.substring(n,n+6);try{let r=h.decode(i),o=oe.DICT.charAt(r);t+=o,n+=6}catch{throw new Se("Unencodable Base64Url '"+e+"'")}}return t}decode(e){if(!/^[A-Za-z0-9\-_]*$/.test(e))throw new P("Undecodable Base64URL string");let t="";for(let n=0;n<e.length;n++){let i=e.charAt(n),r=oe.REVERSE_DICT.get(i),o=h.encode(r,6);t+=o}return t}}class K extends oe{pad(e){for(;e.length%8>0;)e+="0";for(;e.length%6>0;)e+="0";return e}}class q{static encode(e){let t=[];if(e>=1&&(t.push(1),e>=2)){t.push(2);let i=2;for(;e>=t[i-1]+t[i-2];)t.push(t[i-1]+t[i-2]),i++}let n="1";for(let i=t.length-1;i>=0;i--){let r=t[i];e>=r?(n="1"+n,e-=r):n="0"+n}return n}static decode(e){if(!/^[0-1]*$/.test(e)||e.length<2||e.indexOf("11")!==e.length-2)throw new P("Undecodable FibonacciInteger '"+e+"'");let t=0,n=[];for(let i=0;i<e.length-1;i++)i===0?n.push(1):i===1?n.push(2):n.push(n[i-1]+n[i-2]);for(let i=0;i<e.length-1;i++)e.charAt(i)==="1"&&(t+=n[i]);return t}}class z{static encode(e){if(e===!0)return"1";if(e===!1)return"0";throw new Se("Unencodable Boolean '"+e+"'")}static decode(e){if(e==="1")return!0;if(e==="0")return!1;throw new P("Undecodable Boolean '"+e+"'")}}class fe{static encode(e){e=e.sort((o,S)=>o-S);let t=[],n=0,i=0;for(;i<e.length;){let o=i;for(;o<e.length-1&&e[o]+1===e[o+1];)o++;t.push(e.slice(i,o+1)),i=o+1}let r=h.encode(t.length,12);for(let o=0;o<t.length;o++)if(t[o].length==1){let S=t[o][0]-n;n=t[o][0],r+="0"+q.encode(S)}else{let S=t[o][0]-n;n=t[o][0];let d=t[o][t[o].length-1]-n;n=t[o][t[o].length-1],r+="1"+q.encode(S)+q.encode(d)}return r}static decode(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new P("Undecodable FibonacciIntegerRange '"+e+"'");let t=[],n=h.decode(e.substring(0,12)),i=0,r=12;for(let o=0;o<n;o++){let S=z.decode(e.substring(r,r+1));if(r++,S===!0){let d=e.indexOf("11",r),p=q.decode(e.substring(r,d+2))+i;i=p,r=d+2,d=e.indexOf("11",r);let m=q.decode(e.substring(r,d+2))+i;i=m,r=d+2;for(let f=p;f<=m;f++)t.push(f)}else{let d=e.indexOf("11",r),p=q.decode(e.substring(r,d+2))+i;i=p,t.push(p),r=d+2}}return t}}class B{value;hasValue(){return this.value!==void 0&&this.value!==null}getValue(){return this.value}setValue(e){this.value=e}}class et extends B{constructor(e){super(),this.setValue(e)}encode(){return fe.encode(this.value)}decode(e){this.value=fe.decode(e)}substring(e,t){let n=h.decode(e.substring(t,t+12)),i=t+12;for(let r=0;r<n;r++)e.charAt(i)==="1"?i=e.indexOf("11",e.indexOf("11",i+1)+2)+2:i=e.indexOf("11",i+1)+2;return e.substring(t,i)}getValue(){return[...super.getValue()]}setValue(e){super.setValue([...new Set(e)].sort((t,n)=>t-n))}}class l extends B{bitStringLength;constructor(e,t){super(),this.bitStringLength=e,this.setValue(t)}encode(){return h.encode(this.value,this.bitStringLength)}decode(e){this.value=h.decode(e)}substring(e,t){return e.substring(t,t+this.bitStringLength)}}var W;(function(s){s.ID="Id",s.VERSION="Version",s.SECTION_IDS="SectionIds"})(W||(W={}));class ue{fields;fieldOrder;constructor(e,t){this.fields=e,this.fieldOrder=t}hasField(e){return this.fields.has(e)}getFieldValue(e){return this.fields.has(e)?this.fields.get(e).getValue():null}setFieldValue(e,t){if(this.fields.has(e))this.fields.get(e).setValue(t);else throw new Error(e+" not found")}getFieldOrder(){return this.fieldOrder}encodeToBitString(){let e="";for(let t=0;t<this.fieldOrder.length;t++){let n=this.fieldOrder[t];if(this.fields.has(n)){let i=this.fields.get(n);e+=i.encode()}else throw new Error("Field not found: '"+n+"'")}return e}decodeFromBitString(e){let t=0;for(let n=0;n<this.fieldOrder.length;n++){let i=this.fieldOrder[n];if(this.fields.has(i)){let r=this.fields.get(i),o=r.substring(e,t);r.decode(o),t+=o.length}else throw new Error("Field not found: '"+i+"'")}}toObj(){let e={};for(let t=0;t<this.fieldOrder.length;t++){let n=this.fieldOrder[t];if(this.fields.has(n)){let r=this.fields.get(n).getValue();e[n]=r}}return e}}class k extends ue{static ID=3;static VERSION=1;static NAME="header";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(W.ID.toString(),new l(6,k.ID)),t.set(W.VERSION.toString(),new l(6,k.VERSION)),t.set(W.SECTION_IDS.toString(),new et([]));let n=[W.ID.toString(),W.VERSION.toString(),W.SECTION_IDS.toString()];super(t,n),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeToBitString();return this.base64UrlEncoder.encode(e)}decode(e){let t=this.base64UrlEncoder.decode(e);this.decodeFromBitString(t)}getId(){return k.ID}getName(){return k.NAME}}class U extends B{constructor(e){super(),this.setValue(e)}encode(){return z.encode(this.value)}decode(e){this.value=z.decode(e)}substring(e,t){return e.substring(t,t+1)}}class Pe{static encode(e){return e?h.encode(Math.round(e.getTime()/100),36):h.encode(0,36)}static decode(e){if(!/^[0-1]*$/.test(e)||e.length!==36)throw new P("Undecodable Datetime '"+e+"'");return new Date(h.decode(e)*100)}}class Ee extends B{constructor(e){super(),this.setValue(e)}encode(){return Pe.encode(this.value)}decode(e){this.value=Pe.decode(e)}substring(e,t){return e.substring(t,t+36)}}class J{static encode(e,t){let n="";for(let i=0;i<e.length;i++)n+=z.encode(e[i]);for(;n.length<t;)n+="0";return n}static decode(e){if(!/^[0-1]*$/.test(e))throw new P("Undecodable FixedBitfield '"+e+"'");let t=[];for(let n=0;n<e.length;n++)t.push(z.decode(e.substring(n,n+1)));return t}}class ce extends B{getLength;constructor(e,t){super(),this.getLength=e,this.setValue(t)}encode(){return J.encode(this.value,this.getLength())}decode(e){this.value=J.decode(e)}substring(e,t){return e.substring(t,t+this.getLength())}getValue(){return[...super.getValue()]}setValue(e){let t=this.getLength(),n=[...e];for(let i=n.length;i<t;i++)n.push(!1);n.length>t&&(n=n.slice(0,t)),super.setValue([...n])}}class F extends B{numElements;constructor(e){super(),this.numElements=e.length,this.setValue(e)}encode(){return J.encode(this.value,this.numElements)}decode(e){this.value=J.decode(e)}substring(e,t){return e.substring(t,t+this.numElements)}getValue(){return[...super.getValue()]}setValue(e){let t=[...e];for(let n=t.length;n<this.numElements;n++)t.push(!1);t.length>this.numElements&&(t=t.slice(0,this.numElements)),super.setValue(t)}}class Ce{static encode(e,t){for(;e.length<t;)e+=" ";let n="";for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r===32)n+=h.encode(63,6);else if(r>=65)n+=h.encode(e.charCodeAt(i)-65,6);else throw new Se("Unencodable FixedString '"+e+"'")}return n}static decode(e){if(!/^[0-1]*$/.test(e)||e.length%6!==0)throw new P("Undecodable FixedString '"+e+"'");let t="";for(let n=0;n<e.length;n+=6){let i=h.decode(e.substring(n,n+6));i===63?t+=" ":t+=String.fromCharCode(i+65)}return t.trim()}}class he extends B{stringLength;constructor(e,t){super(),this.stringLength=e,this.setValue(t)}encode(){return Ce.encode(this.value,this.stringLength)}decode(e){this.value=Ce.decode(e)}substring(e,t){return e.substring(t,t+this.stringLength*6)}}class Z{fields;segments;constructor(e,t){this.fields=e,this.segments=t}hasField(e){return this.fields.has(e)}getFieldValue(e){return this.fields.has(e)?this.fields.get(e).getValue():null}setFieldValue(e,t){if(this.fields.has(e))this.fields.get(e).setValue(t);else throw new Error(e+" not found")}getSegments(){return this.segments}encodeSegmentsToBitStrings(){let e=[];for(let t=0;t<this.segments.length;t++){let n="";for(let i=0;i<this.segments[t].length;i++){let r=this.segments[t][i];if(this.fields.has(r))try{let o=this.fields.get(r);n+=o.encode()}catch{throw new Error("Unable to encode "+r)}else throw new Error("Field not found: '"+r+"'")}e.push(n)}return e}decodeSegmentsFromBitStrings(e){for(let t=0;t<this.segments.length&&t<e.length;t++){let n=e[t];if(n&&n.length>0){let i=0;for(let r=0;r<this.segments[t].length;r++){let o=this.segments[t][r];if(this.fields.has(o))try{let S=this.fields.get(o),d=S.substring(n,i);S.decode(d),i+=d.length}catch{throw new Error("Unable to decode "+o)}else throw new Error("Field not found: '"+o+"'")}}}}toObj(){let e={};for(let t=0;t<this.segments.length;t++)for(let n=0;n<this.segments[t].length;n++){let i=this.segments[t][n];if(this.fields.has(i)){let o=this.fields.get(i).getValue();e[i]=o}}return e}}class de{static encode(e){e.sort((r,o)=>r-o);let t=[],n=0;for(;n<e.length;){let r=n;for(;r<e.length-1&&e[r]+1===e[r+1];)r++;t.push(e.slice(n,r+1)),n=r+1}let i=h.encode(t.length,12);for(let r=0;r<t.length;r++)t[r].length===1?i+="0"+h.encode(t[r][0],16):i+="1"+h.encode(t[r][0],16)+h.encode(t[r][t[r].length-1],16);return i}static decode(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new P("Undecodable FixedIntegerRange '"+e+"'");let t=[],n=h.decode(e.substring(0,12)),i=12;for(let r=0;r<n;r++){let o=z.decode(e.substring(i,i+1));if(i++,o===!0){let S=h.decode(e.substring(i,i+16));i+=16;let d=h.decode(e.substring(i,i+16));i+=16;for(let p=S;p<=d;p++)t.push(p)}else{let S=h.decode(e.substring(i,i+16));t.push(S),i+=16}}return t}}class De extends B{constructor(e){super(),this.setValue(e)}encode(){return de.encode(this.value)}decode(e){this.value=de.decode(e)}substring(e,t){let n=h.decode(e.substring(t,t+12)),i=t+12;for(let r=0;r<n;r++)e.charAt(i)==="1"?i+=33:i+=17;return e.substring(t,i)}getValue(){return[...super.getValue()]}setValue(e){super.setValue([...new Set(e)].sort((t,n)=>t-n))}}class ee extends B{constructor(e){super(),this.setValue(e)}encode(){let e=this.value.length>0?this.value[this.value.length-1]:0,t=de.encode(this.value),n=t.length,i=e;if(n<=i)return h.encode(e,16)+"1"+t;{let r=[],o=0;for(let S=0;S<e;S++)S===this.value[o]-1?(r[S]=!0,o++):r[S]=!1;return h.encode(e,16)+"0"+J.encode(r,i)}}decode(e){if(e.charAt(16)==="1")this.value=de.decode(e.substring(17));else{let t=[],n=J.decode(e.substring(17));for(let i=0;i<n.length;i++)n[i]===!0&&t.push(i+1);this.value=t}}substring(e,t){let n=h.decode(e.substring(t,t+16));return e.charAt(t+16)==="1"?e.substring(t,t+17)+new De([]).substring(e,t+17):e.substring(t,t+17+n)}getValue(){return[...super.getValue()]}setValue(e){super.setValue([...new Set(e)].sort((t,n)=>t-n))}}var a;(function(s){s.VERSION="Version",s.CREATED="Created",s.LAST_UPDATED="LastUpdated",s.CMP_ID="CmpId",s.CMP_VERSION="CmpVersion",s.CONSENT_SCREEN="ConsentScreen",s.CONSENT_LANGUAGE="ConsentLanguage",s.VENDOR_LIST_VERSION="VendorListVersion",s.POLICY_VERSION="PolicyVersion",s.IS_SERVICE_SPECIFIC="IsServiceSpecific",s.USE_NON_STANDARD_STACKS="UseNonStandardStacks",s.SPECIAL_FEATURE_OPTINS="SpecialFeatureOptins",s.PURPOSE_CONSENTS="PurposeConsents",s.PURPOSE_LEGITIMATE_INTERESTS="PurposeLegitimateInterests",s.PURPOSE_ONE_TREATMENT="PurposeOneTreatment",s.PUBLISHER_COUNTRY_CODE="PublisherCountryCode",s.VENDOR_CONSENTS="VendorConsents",s.VENDOR_LEGITIMATE_INTERESTS="VendorLegitimateInterests",s.PUBLISHER_RESTRICTIONS="PublisherRestrictions",s.PUBLISHER_PURPOSES_SEGMENT_TYPE="PublisherPurposesSegmentType",s.PUBLISHER_CONSENTS="PublisherConsents",s.PUBLISHER_LEGITIMATE_INTERESTS="PublisherLegitimateInterests",s.NUM_CUSTOM_PURPOSES="NumCustomPurposes",s.PUBLISHER_CUSTOM_CONSENTS="PublisherCustomConsents",s.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS="PublisherCustomLegitimateInterests",s.VENDORS_ALLOWED_SEGMENT_TYPE="VendorsAllowedSegmentType",s.VENDORS_ALLOWED="VendorsAllowed",s.VENDORS_DISCLOSED_SEGMENT_TYPE="VendorsDisclosedSegmentType",s.VENDORS_DISCLOSED="VendorsDisclosed"})(a||(a={}));class tt extends oe{pad(e){for(;e.length%24>0;)e+="0";return e}}class N extends Z{static ID=2;static VERSION=2;static NAME="tcfeuv2";base64UrlEncoder=new tt;constructor(e){let t=new Map,n=new Date;t.set(a.VERSION.toString(),new l(6,N.VERSION)),t.set(a.CREATED.toString(),new Ee(n)),t.set(a.LAST_UPDATED.toString(),new Ee(n)),t.set(a.CMP_ID.toString(),new l(12,0)),t.set(a.CMP_VERSION.toString(),new l(12,0)),t.set(a.CONSENT_SCREEN.toString(),new l(6,0)),t.set(a.CONSENT_LANGUAGE.toString(),new he(2,"EN")),t.set(a.VENDOR_LIST_VERSION.toString(),new l(12,0)),t.set(a.POLICY_VERSION.toString(),new l(6,2)),t.set(a.IS_SERVICE_SPECIFIC.toString(),new U(!1)),t.set(a.USE_NON_STANDARD_STACKS.toString(),new U(!1)),t.set(a.SPECIAL_FEATURE_OPTINS.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(a.PURPOSE_CONSENTS.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(a.PURPOSE_LEGITIMATE_INTERESTS.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(a.PURPOSE_ONE_TREATMENT.toString(),new U(!1)),t.set(a.PUBLISHER_COUNTRY_CODE.toString(),new he(2,"AA")),t.set(a.VENDOR_CONSENTS.toString(),new ee([])),t.set(a.VENDOR_LEGITIMATE_INTERESTS.toString(),new ee([])),t.set(a.PUBLISHER_RESTRICTIONS.toString(),new De([])),t.set(a.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),new l(3,3)),t.set(a.PUBLISHER_CONSENTS.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(a.PUBLISHER_LEGITIMATE_INTERESTS.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));let i=new l(6,0);t.set(a.NUM_CUSTOM_PURPOSES.toString(),i),t.set(a.PUBLISHER_CUSTOM_CONSENTS.toString(),new ce(()=>i.getValue(),[])),t.set(a.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString(),new ce(()=>i.getValue(),[])),t.set(a.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),new l(3,2)),t.set(a.VENDORS_ALLOWED.toString(),new ee([])),t.set(a.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),new l(3,1)),t.set(a.VENDORS_DISCLOSED.toString(),new ee([]));let r=[a.VERSION.toString(),a.CREATED.toString(),a.LAST_UPDATED.toString(),a.CMP_ID.toString(),a.CMP_VERSION.toString(),a.CONSENT_SCREEN.toString(),a.CONSENT_LANGUAGE.toString(),a.VENDOR_LIST_VERSION.toString(),a.POLICY_VERSION.toString(),a.IS_SERVICE_SPECIFIC.toString(),a.USE_NON_STANDARD_STACKS.toString(),a.SPECIAL_FEATURE_OPTINS.toString(),a.PURPOSE_CONSENTS.toString(),a.PURPOSE_LEGITIMATE_INTERESTS.toString(),a.PURPOSE_ONE_TREATMENT.toString(),a.PUBLISHER_COUNTRY_CODE.toString(),a.VENDOR_CONSENTS.toString(),a.VENDOR_LEGITIMATE_INTERESTS.toString(),a.PUBLISHER_RESTRICTIONS.toString()],o=[a.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),a.PUBLISHER_CONSENTS.toString(),a.PUBLISHER_LEGITIMATE_INTERESTS.toString(),a.NUM_CUSTOM_PURPOSES.toString(),a.PUBLISHER_CUSTOM_CONSENTS.toString(),a.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString()],S=[a.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),a.VENDORS_ALLOWED.toString()],d=[a.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),a.VENDORS_DISCLOSED.toString()],p=[r,o,S,d];super(t,p),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),this.getFieldValue(a.IS_SERVICE_SPECIFIC.toString())?e[1]&&e[1].length>0&&t.push(this.base64UrlEncoder.encode(e[1])):(e[2]&&e[2].length>0&&t.push(this.base64UrlEncoder.encode(e[2])),e[3]&&e[3].length>0&&t.push(this.base64UrlEncoder.encode(e[3]))),t.join(".")}decode(e){let t=e.split("."),n=[];for(let i=0;i<t.length;i++){let r=this.base64UrlEncoder.decode(t[i]);switch(r.substring(0,3)){case"000":{n[0]=r;break}case"001":{n[3]=r;break}case"010":{n[2]=r;break}case"011":{n[1]=r;break}default:throw new P("Unable to decode segment '"+t[i]+"'")}}this.decodeSegmentsFromBitStrings(n)}setFieldValue(e,t){if(super.setFieldValue(e,t),e!==a.CREATED.toString()&&e!==a.LAST_UPDATED.toString()){const n=new Date,i=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));this.setFieldValue(a.CREATED.toString(),i),this.setFieldValue(a.LAST_UPDATED.toString(),i)}}getId(){return N.ID}getName(){return N.NAME}}var E;(function(s){s.VERSION="Version",s.CREATED="Created",s.LAST_UPDATED="LastUpdated",s.CMP_ID="CmpId",s.CMP_VERSION="CmpVersion",s.CONSENT_SCREEN="ConsentScreen",s.CONSENT_LANGUAGE="ConsentLanguage",s.VENDOR_LIST_VERSION="VendorListVersion",s.TCF_POLICY_VERSION="TcfPolicyVersion",s.USE_NON_STANDARD_STACKS="UseNonStandardStacks",s.SPECIAL_FEATURE_EXPRESS_CONSENT="SpecialFeatureExpressConsent",s.PURPOSES_EXPRESS_CONSENT="PurposesExpressConsent",s.PURPOSES_IMPLIED_CONSENT="PurposesImpliedConsent",s.VENDOR_EXPRESS_CONSENT="VendorExpressConsent",s.VENDOR_IMPLIED_CONSENT="VendorImpliedConsent",s.SEGMENT_TYPE="SegmentType",s.PUB_PURPOSES_EXPRESS_CONSENT="PubPurposesExpressConsent",s.PUB_PURPOSES_IMPLIED_CONSENT="PubPurposesImpliedConsent",s.NUM_CUSTOM_PURPOSES="NumCustomPurposes",s.CUSTOM_PURPOSES_EXPRESS_CONSENT="CustomPurposesExpressConsent",s.CUSTOM_PURPOSES_IMPLIED_CONSENT="CustomPurposesImpliedConsent"})(E||(E={}));class L extends Z{static ID=5;static VERSION=2;static NAME="tcfcav1";base64UrlEncoder=new K;constructor(e){let t=new Map,n=new Date;t.set(E.VERSION.toString(),new l(6,L.VERSION)),t.set(E.CREATED.toString(),new Ee(n)),t.set(E.LAST_UPDATED.toString(),new Ee(n)),t.set(E.CMP_ID.toString(),new l(12,0)),t.set(E.CMP_VERSION.toString(),new l(12,0)),t.set(E.CONSENT_SCREEN.toString(),new l(6,0)),t.set(E.CONSENT_LANGUAGE.toString(),new he(2,"EN")),t.set(E.VENDOR_LIST_VERSION.toString(),new l(12,0)),t.set(E.TCF_POLICY_VERSION.toString(),new l(6,1)),t.set(E.USE_NON_STANDARD_STACKS.toString(),new U(!1)),t.set(E.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(E.PURPOSES_EXPRESS_CONSENT.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(E.PURPOSES_IMPLIED_CONSENT.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(E.VENDOR_EXPRESS_CONSENT.toString(),new ee([])),t.set(E.VENDOR_IMPLIED_CONSENT.toString(),new ee([])),t.set(E.SEGMENT_TYPE.toString(),new l(3,3)),t.set(E.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(E.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new F([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));let i=new l(6,0);t.set(E.NUM_CUSTOM_PURPOSES.toString(),i),t.set(E.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new ce(()=>i.getValue(),[])),t.set(E.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new ce(()=>i.getValue(),[]));let r=[E.VERSION.toString(),E.CREATED.toString(),E.LAST_UPDATED.toString(),E.CMP_ID.toString(),E.CMP_VERSION.toString(),E.CONSENT_SCREEN.toString(),E.CONSENT_LANGUAGE.toString(),E.VENDOR_LIST_VERSION.toString(),E.TCF_POLICY_VERSION.toString(),E.USE_NON_STANDARD_STACKS.toString(),E.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),E.PURPOSES_EXPRESS_CONSENT.toString(),E.PURPOSES_IMPLIED_CONSENT.toString(),E.VENDOR_EXPRESS_CONSENT.toString(),E.VENDOR_IMPLIED_CONSENT.toString()],o=[E.SEGMENT_TYPE.toString(),E.PUB_PURPOSES_EXPRESS_CONSENT.toString(),E.PUB_PURPOSES_IMPLIED_CONSENT.toString(),E.NUM_CUSTOM_PURPOSES.toString(),E.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),E.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()],S=[r,o];super(t,S),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&t.push(this.base64UrlEncoder.encode(e[1])),t.join(".")}decode(e){let t=e.split("."),n=[];for(let i=0;i<t.length;i++){let r=this.base64UrlEncoder.decode(t[i]);switch(r.substring(0,3)){case"000":{n[0]=r;break}case"011":{n[1]=r;break}default:throw new P("Unable to decode segment '"+t[i]+"'")}}this.decodeSegmentsFromBitStrings(n)}setFieldValue(e,t){if(super.setFieldValue(e,t),e!==E.CREATED.toString()&&e!==E.LAST_UPDATED.toString()){const n=new Date,i=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));this.setFieldValue(E.CREATED.toString(),i),this.setFieldValue(E.LAST_UPDATED.toString(),i)}}getId(){return L.ID}getName(){return L.NAME}}class Re extends Error{constructor(e){super(e),this.name="InvalidFieldError"}}var G;(function(s){s.VERSION="Version",s.NOTICE="Notice",s.OPT_OUT_SALE="OptOutSale",s.LSPA_COVERED="LspaCovered"})(G||(G={}));class V{static ID=6;static VERSION=1;static NAME="uspv1";fields;constructor(e){this.fields=new Map,this.fields.set(G.VERSION.toString(),V.VERSION),this.fields.set(G.NOTICE.toString(),"-"),this.fields.set(G.OPT_OUT_SALE.toString(),"-"),this.fields.set(G.LSPA_COVERED.toString(),"-"),e&&e.length>0&&this.decode(e)}hasField(e){return this.fields.has(e)}getFieldValue(e){return this.fields.has(e)?this.fields.get(e):null}setFieldValue(e,t){if(this.fields.has(e))this.fields.set(e,t);else throw new Re(e+" not found")}toObj(){let e={};for(const t of this.fields.keys()){let n=this.fields.get(t);e[t.toString()]=n}return e}encode(){let e="";return e+=this.getFieldValue(G.VERSION.toString()),e+=this.getFieldValue(G.NOTICE.toString()),e+=this.getFieldValue(G.OPT_OUT_SALE.toString()),e+=this.getFieldValue(G.LSPA_COVERED.toString()),e}decode(e){this.setFieldValue(G.VERSION.toString(),parseInt(e.charAt(0))),this.setFieldValue(G.NOTICE.toString(),e.charAt(1)),this.setFieldValue(G.OPT_OUT_SALE.toString(),e.charAt(2)),this.setFieldValue(G.LSPA_COVERED.toString(),e.charAt(3))}getId(){return V.ID}getName(){return V.NAME}}class we{static encode(e,t,n){let i="";for(let r=0;r<e.length;r++)i+=h.encode(e[r],t);for(;i.length<t*n;)i+="0";return i}static decode(e,t,n){if(!/^[0-1]*$/.test(e))throw new P("Undecodable FixedInteger '"+e+"'");if(e.length>t*n)throw new P("Undecodable FixedIntegerList '"+e+"'");if(e.length%t!=0)throw new P("Undecodable FixedIntegerList '"+e+"'");for(;e.length<t*n;)e+="0";e.length>t*n&&(e=e.substring(0,t*n));let i=[];for(let r=0;r<e.length;r+=t)i.push(h.decode(e.substring(r,r+t)));for(;i.length<n;)i.push(0);return i}}class H extends B{elementBitStringLength;numElements;constructor(e,t){super(),this.elementBitStringLength=e,this.numElements=t.length,this.setValue(t)}encode(){return we.encode(this.value,this.elementBitStringLength,this.numElements)}decode(e){this.value=we.decode(e,this.elementBitStringLength,this.numElements)}substring(e,t){return e.substring(t,t+this.elementBitStringLength*this.numElements)}getValue(){return[...super.getValue()]}setValue(e){let t=[...e];for(let n=t.length;n<this.numElements;n++)t.push(0);t.length>this.numElements&&(t=t.slice(0,this.numElements)),super.setValue(t)}}var c;(function(s){s.VERSION="Version",s.SHARING_NOTICE="SharingNotice",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",s.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",s.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",s.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",s.SALE_OPT_OUT="SaleOptOut",s.SHARING_OPT_OUT="SharingOptOut",s.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.PERSONAL_DATA_CONSENTS="PersonalDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",s.GPC_SEGMENT_TYPE="GpcSegmentType",s.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",s.GPC="Gpc"})(c||(c={}));class A extends Z{static ID=7;static VERSION=1;static NAME="usnatv1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(c.VERSION.toString(),new l(6,A.VERSION)),t.set(c.SHARING_NOTICE.toString(),new l(2,0)),t.set(c.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(c.SHARING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(c.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(c.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(c.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new l(2,0)),t.set(c.SALE_OPT_OUT.toString(),new l(2,0)),t.set(c.SHARING_OPT_OUT.toString(),new l(2,0)),t.set(c.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(c.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0,0,0,0,0,0])),t.set(c.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new H(2,[0,0])),t.set(c.PERSONAL_DATA_CONSENTS.toString(),new l(2,0)),t.set(c.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(c.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(c.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(c.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(c.GPC_SEGMENT_INCLUDED.toString(),new U(!0)),t.set(c.GPC.toString(),new U(!1));let n=[c.VERSION.toString(),c.SHARING_NOTICE.toString(),c.SALE_OPT_OUT_NOTICE.toString(),c.SHARING_OPT_OUT_NOTICE.toString(),c.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),c.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),c.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),c.SALE_OPT_OUT.toString(),c.SHARING_OPT_OUT.toString(),c.TARGETED_ADVERTISING_OPT_OUT.toString(),c.SENSITIVE_DATA_PROCESSING.toString(),c.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),c.PERSONAL_DATA_CONSENTS.toString(),c.MSPA_COVERED_TRANSACTION.toString(),c.MSPA_OPT_OUT_OPTION_MODE.toString(),c.MSPA_SERVICE_PROVIDER_MODE.toString()],i=[c.GPC_SEGMENT_TYPE.toString(),c.GPC.toString()],r=[n,i];super(t,r),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&this.fields.get(c.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(e[1])),t.join(".")}decode(e){let t=e.split("."),n=[],i=!1;for(let r=0;r<t.length;r++){let o=this.base64UrlEncoder.decode(t[r]);switch(o.substring(0,2)){case"00":{n[0]=o;break}case"01":{i=!0,n[1]=o;break}default:throw new P("Unable to decode segment '"+t[r]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(c.GPC_SEGMENT_INCLUDED).setValue(i)}getId(){return A.ID}getName(){return A.NAME}}var _;(function(s){s.VERSION="Version",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",s.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",s.SALE_OPT_OUT="SaleOptOut",s.SHARING_OPT_OUT="SharingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.PERSONAL_DATA_CONSENTS="PersonalDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",s.GPC_SEGMENT_TYPE="GpcSegmentType",s.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",s.GPC="Gpc"})(_||(_={}));class C extends Z{static ID=8;static VERSION=1;static NAME="uscav1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(_.VERSION.toString(),new l(6,C.VERSION)),t.set(_.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(_.SHARING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(_.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new l(2,0)),t.set(_.SALE_OPT_OUT.toString(),new l(2,0)),t.set(_.SHARING_OPT_OUT.toString(),new l(2,0)),t.set(_.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0,0,0])),t.set(_.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new H(2,[0,0])),t.set(_.PERSONAL_DATA_CONSENTS.toString(),new l(2,0)),t.set(_.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(_.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(_.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(_.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(_.GPC_SEGMENT_INCLUDED.toString(),new U(!0)),t.set(_.GPC.toString(),new U(!1));let n=[_.VERSION.toString(),_.SALE_OPT_OUT_NOTICE.toString(),_.SHARING_OPT_OUT_NOTICE.toString(),_.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),_.SALE_OPT_OUT.toString(),_.SHARING_OPT_OUT.toString(),_.SENSITIVE_DATA_PROCESSING.toString(),_.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),_.PERSONAL_DATA_CONSENTS.toString(),_.MSPA_COVERED_TRANSACTION.toString(),_.MSPA_OPT_OUT_OPTION_MODE.toString(),_.MSPA_SERVICE_PROVIDER_MODE.toString()],i=[_.GPC_SEGMENT_TYPE.toString(),_.GPC.toString()],r=[n,i];super(t,r),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&this.fields.get(_.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(e[1])),t.join(".")}decode(e){let t=e.split("."),n=[],i=!1;for(let r=0;r<t.length;r++){let o=this.base64UrlEncoder.decode(t[r]);switch(o.substring(0,2)){case"00":{n[0]=o;break}case"01":{i=!0,n[1]=o;break}default:throw new P("Unable to decode segment '"+t[r]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(_.GPC_SEGMENT_INCLUDED).setValue(i)}getId(){return C.ID}getName(){return C.NAME}}var O;(function(s){s.VERSION="Version",s.SHARING_NOTICE="SharingNotice",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",s.SALE_OPT_OUT="SaleOptOut",s.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(O||(O={}));class D extends ue{static ID=9;static VERSION=1;static NAME="usvav1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(O.VERSION.toString(),new l(6,D.VERSION)),t.set(O.SHARING_NOTICE.toString(),new l(2,0)),t.set(O.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(O.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(O.SALE_OPT_OUT.toString(),new l(2,0)),t.set(O.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(O.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0,0])),t.set(O.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(O.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(O.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(O.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0));let n=[O.VERSION.toString(),O.SHARING_NOTICE.toString(),O.SALE_OPT_OUT_NOTICE.toString(),O.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),O.SALE_OPT_OUT.toString(),O.TARGETED_ADVERTISING_OPT_OUT.toString(),O.SENSITIVE_DATA_PROCESSING.toString(),O.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),O.MSPA_COVERED_TRANSACTION.toString(),O.MSPA_OPT_OUT_OPTION_MODE.toString(),O.MSPA_SERVICE_PROVIDER_MODE.toString()];super(t,n),e&&e.length>0&&this.decode(e)}encode(){return this.base64UrlEncoder.encode(this.encodeToBitString())}decode(e){this.decodeFromBitString(this.base64UrlEncoder.decode(e))}getId(){return D.ID}getName(){return D.NAME}}var g;(function(s){s.VERSION="Version",s.SHARING_NOTICE="SharingNotice",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",s.SALE_OPT_OUT="SaleOptOut",s.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",s.GPC_SEGMENT_TYPE="GpcSegmentType",s.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",s.GPC="Gpc"})(g||(g={}));class R extends Z{static ID=10;static VERSION=1;static NAME="uscov1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(g.VERSION.toString(),new l(6,R.VERSION)),t.set(g.SHARING_NOTICE.toString(),new l(2,0)),t.set(g.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(g.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(g.SALE_OPT_OUT.toString(),new l(2,0)),t.set(g.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(g.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0])),t.set(g.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(g.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(g.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(g.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(g.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(g.GPC_SEGMENT_INCLUDED.toString(),new U(!0)),t.set(g.GPC.toString(),new U(!1));let n=[g.VERSION.toString(),g.SHARING_NOTICE.toString(),g.SALE_OPT_OUT_NOTICE.toString(),g.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),g.SALE_OPT_OUT.toString(),g.TARGETED_ADVERTISING_OPT_OUT.toString(),g.SENSITIVE_DATA_PROCESSING.toString(),g.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),g.MSPA_COVERED_TRANSACTION.toString(),g.MSPA_OPT_OUT_OPTION_MODE.toString(),g.MSPA_SERVICE_PROVIDER_MODE.toString()],i=[g.GPC_SEGMENT_TYPE.toString(),g.GPC.toString()],r=[n,i];super(t,r),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&this.fields.get(g.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(e[1])),t.join(".")}decode(e){let t=e.split("."),n=[],i=!1;for(let r=0;r<t.length;r++){let o=this.base64UrlEncoder.decode(t[r]);switch(o.substring(0,2)){case"00":{n[0]=o;break}case"01":{i=!0,n[1]=o;break}default:throw new P("Unable to decode segment '"+t[r]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(g.GPC_SEGMENT_INCLUDED).setValue(i)}getId(){return R.ID}getName(){return R.NAME}}var T;(function(s){s.VERSION="Version",s.SHARING_NOTICE="SharingNotice",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",s.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",s.SALE_OPT_OUT="SaleOptOut",s.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(T||(T={}));class w extends ue{static ID=11;static VERSION=1;static NAME="usutv1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(T.VERSION.toString(),new l(6,w.VERSION)),t.set(T.SHARING_NOTICE.toString(),new l(2,0)),t.set(T.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(T.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(T.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(T.SALE_OPT_OUT.toString(),new l(2,0)),t.set(T.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(T.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0,0])),t.set(T.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new l(2,0)),t.set(T.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(T.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(T.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0));let n=[T.VERSION.toString(),T.SHARING_NOTICE.toString(),T.SALE_OPT_OUT_NOTICE.toString(),T.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),T.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),T.SALE_OPT_OUT.toString(),T.TARGETED_ADVERTISING_OPT_OUT.toString(),T.SENSITIVE_DATA_PROCESSING.toString(),T.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),T.MSPA_COVERED_TRANSACTION.toString(),T.MSPA_OPT_OUT_OPTION_MODE.toString(),T.MSPA_SERVICE_PROVIDER_MODE.toString()];super(t,n),e&&e.length>0&&this.decode(e)}encode(){return this.base64UrlEncoder.encode(this.encodeToBitString())}decode(e){this.decodeFromBitString(this.base64UrlEncoder.decode(e))}getId(){return w.ID}getName(){return w.NAME}}var u;(function(s){s.VERSION="Version",s.SHARING_NOTICE="SharingNotice",s.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",s.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",s.SALE_OPT_OUT="SaleOptOut",s.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",s.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",s.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",s.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",s.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",s.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",s.GPC_SEGMENT_TYPE="GpcSegmentType",s.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",s.GPC="Gpc"})(u||(u={}));class M extends Z{static ID=12;static VERSION=1;static NAME="usctv1";base64UrlEncoder=new K;constructor(e){let t=new Map;t.set(u.VERSION.toString(),new l(6,M.VERSION)),t.set(u.SHARING_NOTICE.toString(),new l(2,0)),t.set(u.SALE_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(u.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new l(2,0)),t.set(u.SALE_OPT_OUT.toString(),new l(2,0)),t.set(u.TARGETED_ADVERTISING_OPT_OUT.toString(),new l(2,0)),t.set(u.SENSITIVE_DATA_PROCESSING.toString(),new H(2,[0,0,0,0,0,0,0,0])),t.set(u.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new H(2,[0,0,0])),t.set(u.MSPA_COVERED_TRANSACTION.toString(),new l(2,0)),t.set(u.MSPA_OPT_OUT_OPTION_MODE.toString(),new l(2,0)),t.set(u.MSPA_SERVICE_PROVIDER_MODE.toString(),new l(2,0)),t.set(u.GPC_SEGMENT_TYPE.toString(),new l(2,1)),t.set(u.GPC_SEGMENT_INCLUDED.toString(),new U(!0)),t.set(u.GPC.toString(),new U(!1));let n=[u.VERSION.toString(),u.SHARING_NOTICE.toString(),u.SALE_OPT_OUT_NOTICE.toString(),u.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),u.SALE_OPT_OUT.toString(),u.TARGETED_ADVERTISING_OPT_OUT.toString(),u.SENSITIVE_DATA_PROCESSING.toString(),u.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),u.MSPA_COVERED_TRANSACTION.toString(),u.MSPA_OPT_OUT_OPTION_MODE.toString(),u.MSPA_SERVICE_PROVIDER_MODE.toString()],i=[u.GPC_SEGMENT_TYPE.toString(),u.GPC.toString()],r=[n,i];super(t,r),e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&this.fields.get(u.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(e[1])),t.join(".")}decode(e){let t=e.split("."),n=[],i=!1;for(let r=0;r<t.length;r++){let o=this.base64UrlEncoder.decode(t[r]);switch(o.substring(0,2)){case"00":{n[0]=o;break}case"01":{i=!0,n[1]=o;break}default:throw new P("Unable to decode segment '"+t[r]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(u.GPC_SEGMENT_INCLUDED).setValue(i)}getId(){return M.ID}getName(){return M.NAME}}class I{static SECTION_ID_NAME_MAP=new Map([[N.ID,N.NAME],[L.ID,L.NAME],[V.ID,V.NAME],[A.ID,A.NAME],[C.ID,C.NAME],[D.ID,D.NAME],[R.ID,R.NAME],[w.ID,w.NAME],[M.ID,M.NAME]]);static SECTION_ORDER=[N.NAME,L.NAME,V.NAME,A.NAME,C.NAME,D.NAME,R.NAME,w.NAME,M.NAME]}class v extends P{constructor(e){super(e),this.name="LazyDecodingError"}}class Me{sections=new Map;encodedString;decoded;dirty;constructor(e){e?(this.encodedString=e,this.decoded=!1,this.dirty=!1):(this.encodedString="DBAA",this.decoded=!1,this.dirty=!1)}setFieldValue(e,t,n){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(r){throw new v(r.message)}let i=null;if(this.sections.has(e)?i=this.sections.get(e):e===L.NAME?(i=new L,this.sections.set(L.NAME,i)):e===N.NAME?(i=new N,this.sections.set(N.NAME,i)):e===V.NAME?(i=new V,this.sections.set(V.NAME,i)):e===A.NAME?(i=new A,this.sections.set(A.NAME,i)):e===C.NAME?(i=new C,this.sections.set(C.NAME,i)):e===D.NAME?(i=new D,this.sections.set(D.NAME,i)):e===R.NAME?(i=new R,this.sections.set(R.NAME,i)):e===w.NAME?(i=new w,this.sections.set(w.NAME,i)):e===M.NAME&&(i=new M,this.sections.set(M.NAME,i)),i)i.setFieldValue(t,n),this.dirty=!0;else throw new Re(e+"."+t+" not found")}setFieldValueBySectionId(e,t,n){this.setFieldValue(I.SECTION_ID_NAME_MAP.get(e),t,n)}getFieldValue(e,t){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new v(n.message)}return this.sections.has(e)?this.sections.get(e).getFieldValue(t):null}getFieldValueBySectionId(e,t){return this.getFieldValue(I.SECTION_ID_NAME_MAP.get(e),t)}hasField(e,t){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new v(n.message)}return this.sections.has(e)?this.sections.get(e).hasField(t):!1}hasFieldBySectionId(e,t){return this.hasField(I.SECTION_ID_NAME_MAP.get(e),t)}hasSection(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}return this.sections.has(e)}hasSectionId(e){return this.hasSection(I.SECTION_ID_NAME_MAP.get(e))}deleteSection(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}this.sections.delete(e),this.dirty=!0}deleteSectionById(e){this.deleteSection(I.SECTION_ID_NAME_MAP.get(e))}clear(){this.sections.clear(),this.encodedString="DBAA",this.decoded=!1,this.dirty=!1}getHeader(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}let e=new k;return e.setFieldValue("SectionIds",this.getSectionIds()),e.toObj()}getSection(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}return this.sections.has(e)?this.sections.get(e).toObj():null}getSectionIds(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}let e=[];for(let t=0;t<I.SECTION_ORDER.length;t++){let n=I.SECTION_ORDER[t];if(this.sections.has(n)){let i=this.sections.get(n);e.push(i.getId())}}return e}encode(){if(!this.dirty)return this.encodedString;if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(i){throw new v(i.message)}let e=[],t=[];for(let i=0;i<I.SECTION_ORDER.length;i++){let r=I.SECTION_ORDER[i];if(this.sections.has(r)){let o=this.sections.get(r);e.push(o.encode()),t.push(o.getId())}}let n=new k;return n.setFieldValue("SectionIds",this.getSectionIds()),e.unshift(n.encode()),this.encodedString=e.join("~"),this.dirty=!1,this.encodedString}decode(e){this.encodedString=e,this.decoded=!1,this.dirty=!0,this.sections.clear();let t=e.split("~"),n=new k(t[0]);this.sections.set(k.NAME,n);let i=n.getFieldValue("SectionIds");for(let r=0;r<i.length;r++)if(i[r]===L.ID){let o=new L(t[r+1]);this.sections.set(L.NAME,o)}else if(i[r]===N.ID){let o=new N(t[r+1]);this.sections.set(N.NAME,o)}else if(i[r]===V.ID){let o=new V(t[r+1]);this.sections.set(V.NAME,o)}else if(i[r]===A.ID){let o=new A(t[r+1]);this.sections.set(A.NAME,o)}else if(i[r]===C.ID){let o=new C(t[r+1]);this.sections.set(C.NAME,o)}else if(i[r]===D.ID){let o=new D(t[r+1]);this.sections.set(D.NAME,o)}else if(i[r]===R.ID){let o=new R(t[r+1]);this.sections.set(R.NAME,o)}else if(i[r]===w.ID){let o=new w(t[r+1]);this.sections.set(w.NAME,o)}else if(i[r]===M.ID){let o=new M(t[r+1]);this.sections.set(M.NAME,o)}this.decoded=!0,this.dirty=!1}encodeSection(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}return this.sections.has(e)?this.sections.get(e).encode():null}encodeSectionById(e){return this.encodeSection(I.SECTION_ID_NAME_MAP.get(e))}decodeSection(e,t){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(i){throw new v(i.message)}let n=null;this.sections.has(e)?n=this.sections.get(e):e===L.NAME?(n=new L,this.sections.set(L.NAME,n)):e===N.NAME?(n=new N,this.sections.set(N.NAME,n)):e===V.NAME?(n=new V,this.sections.set(V.NAME,n)):e===A.NAME?(n=new A,this.sections.set(A.NAME,n)):e===C.NAME?(n=new C,this.sections.set(C.NAME,n)):e===D.NAME?(n=new D,this.sections.set(D.NAME,n)):e===R.NAME?(n=new R,this.sections.set(R.NAME,n)):e===w.NAME?(n=new w,this.sections.set(w.NAME,n)):e===M.NAME&&(n=new M,this.sections.set(M.NAME,n)),n&&n.decode(t)}decodeSectionById(e,t){this.decodeSection(I.SECTION_ID_NAME_MAP.get(e),t)}toObject(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new v(t.message)}let e={};for(let t=0;t<I.SECTION_ORDER.length;t++){let n=I.SECTION_ORDER[t];this.sections.has(n)&&(e[n]=this.sections.get(n).toObj())}return e}}class st{gppVersion="1.1";supportedAPIs=[];eventQueue=new Ze(this);cmpStatus=X.LOADING;cmpDisplayStatus=Y.HIDDEN;signalStatus=x.NOT_READY;applicableSections=[];gppModel=new Me;cmpId;cmpVersion;eventStatus;reset(){this.eventQueue.clear(),this.cmpStatus=X.LOADING,this.cmpDisplayStatus=Y.HIDDEN,this.signalStatus=x.NOT_READY,this.applicableSections=[],this.supportedAPIs=[],this.gppModel=new Me,delete this.cmpId,delete this.cmpVersion,delete this.eventStatus}}class Te{static absCall(e,t,n,i){return new Promise((r,o)=>{const S=new XMLHttpRequest,d=()=>{if(S.readyState==XMLHttpRequest.DONE)if(S.status>=200&&S.status<300){let b=S.response;if(typeof b=="string")try{b=JSON.parse(b)}catch{}r(b)}else o(new Error(`HTTP Status: ${S.status} response type: ${S.responseType}`))},p=()=>{o(new Error("error"))},m=()=>{o(new Error("aborted"))},f=()=>{o(new Error("Timeout "+i+"ms "+e))};S.withCredentials=n,S.addEventListener("load",d),S.addEventListener("error",p),S.addEventListener("abort",m),t===null?S.open("GET",e,!0):S.open("POST",e,!0),S.responseType="json",S.timeout=i,S.ontimeout=f,S.send(t)})}static post(e,t,n=!1,i=0){return this.absCall(e,JSON.stringify(t),n,i)}static fetch(e,t=!1,n=0){return this.absCall(e,null,t,n)}}class _e extends Error{constructor(e){super(e),this.name="GVLError"}}class re{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(e){return re.langSet.has(e)}forEach(e){re.langSet.forEach(e)}get size(){return re.langSet.size}}class se{vendors;static DEFAULT_LANGUAGE="EN";consentLanguages=new re;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;stacks;dataCategories;language=se.DEFAULT_LANGUAGE;vendorIds;ready=!1;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;baseUrl;languageFilename="purposes-[LANG].json";static fromVendorList(e){let t=new se;return t.populate(e),t}static async fromUrl(e){let t=e.baseUrl;if(!t||t.length===0)throw new _e("Invalid baseUrl: '"+t+"'");if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new _e("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&t[t.length-1]!=="/"&&(t+="/");let n=new se;if(n.baseUrl=t,e.languageFilename?n.languageFilename=e.languageFilename:n.languageFilename="purposes-[LANG].json",e.version>0){let i=e.versionedFilename;i||(i="archives/vendor-list-v[VERSION].json");let r=t+i.replace("[VERSION]",String(e.version));n.populate(await Te.fetch(r))}else{let i=e.latestFilename;i||(i="vendor-list.json");let r=t+i;n.populate(await Te.fetch(r))}return n}async changeLanguage(e){const t=e.toUpperCase();if(this.consentLanguages.has(t)){if(t!==this.language){this.language=t;const n=this.baseUrl+this.languageFilename.replace("[LANG]",e);try{this.populate(await Te.fetch(n))}catch(i){throw new _e("unable to load language: "+i.message)}}}else throw new _e(`unsupported language ${e}`)}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}isVendorList(e){return e!==void 0&&e.vendors!==void 0}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.ready=!0)}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(t=>{this.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(t=>{this.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(t=>{this.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(t=>+t)),this.vendorIds=new Set(e),this.vendors=e.reduce((t,n)=>{const i=this.vendors[String(n)];return i&&i.deletedDate===void 0&&(i.purposes.forEach(r=>{this.byPurposeVendorMap[String(r)].consent.add(n)}),i.specialPurposes.forEach(r=>{this.bySpecialPurposeVendorMap[String(r)].add(n)}),i.legIntPurposes.forEach(r=>{this.byPurposeVendorMap[String(r)].legInt.add(n)}),i.flexiblePurposes&&i.flexiblePurposes.forEach(r=>{this.byPurposeVendorMap[String(r)].flexible.add(n)}),i.features.forEach(r=>{this.byFeatureVendorMap[String(r)].add(n)}),i.specialFeatures.forEach(r=>{this.bySpecialFeatureVendorMap[String(r)].add(n)}),t[n]=i),t},{})}getFilteredVendors(e,t,n,i){const r=e.charAt(0).toUpperCase()+e.slice(1);let o;const S={};return e==="purpose"&&n?o=this["by"+r+"VendorMap"][String(t)][n]:o=this["by"+(i?"Special":"")+r+"VendorMap"][String(t)],o.forEach(d=>{S[String(d)]=this.vendors[String(d)]}),S}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.ready}static isInstanceOf(e){return typeof e=="object"&&typeof e.narrowVendorsTo=="function"}}class nt{callResponder;cmpApiContext;constructor(e,t,n){this.cmpApiContext=new st,this.cmpApiContext.cmpId=e,this.cmpApiContext.cmpVersion=t,this.callResponder=new Je(this.cmpApiContext,n)}fireEvent(e,t){this.cmpApiContext.eventQueue.exec(e,t)}fireErrorEvent(e){this.cmpApiContext.eventQueue.exec("error",e)}fireSectionChange(e){this.cmpApiContext.eventQueue.exec("sectionChange",e)}getEventStatus(){return this.cmpApiContext.eventStatus}setEventStatus(e){this.cmpApiContext.eventStatus=e}getCmpStatus(){return this.cmpApiContext.cmpStatus}setCmpStatus(e){this.cmpApiContext.cmpStatus=e,this.cmpApiContext.eventQueue.exec("cmpStatus",e)}getCmpDisplayStatus(){return this.cmpApiContext.cmpDisplayStatus}setCmpDisplayStatus(e){this.cmpApiContext.cmpDisplayStatus=e,this.cmpApiContext.eventQueue.exec("cmpDisplayStatus",e)}getSignalStatus(){return this.cmpApiContext.signalStatus}setSignalStatus(e){this.cmpApiContext.signalStatus=e,this.cmpApiContext.eventQueue.exec("signalStatus",e)}getApplicableSections(){return this.cmpApiContext.applicableSections}setApplicableSections(e){this.cmpApiContext.applicableSections=e}getSupportedAPIs(){return this.cmpApiContext.supportedAPIs}setSupportedAPIs(e){this.cmpApiContext.supportedAPIs=e}setGppString(e){this.cmpApiContext.gppModel.decode(e)}getGppString(){return this.cmpApiContext.gppModel.encode()}setSectionString(e,t){this.cmpApiContext.gppModel.decodeSection(e,t)}setSectionStringById(e,t){this.setSectionString(I.SECTION_ID_NAME_MAP.get(e),t)}getSectionString(e){return this.cmpApiContext.gppModel.encodeSection(e)}getSectionStringById(e){return this.getSectionString(I.SECTION_ID_NAME_MAP.get(e))}setFieldValue(e,t,n){this.cmpApiContext.gppModel.setFieldValue(e,t,n)}setFieldValueBySectionId(e,t,n){this.setFieldValue(I.SECTION_ID_NAME_MAP.get(e),t,n)}getFieldValue(e,t){return this.cmpApiContext.gppModel.getFieldValue(e,t)}getFieldValueBySectionId(e,t){return this.getFieldValue(I.SECTION_ID_NAME_MAP.get(e),t)}getSection(e){return this.cmpApiContext.gppModel.getSection(e)}getSectionById(e){return this.getSection(I.SECTION_ID_NAME_MAP.get(e))}hasSection(e){return this.cmpApiContext.gppModel.hasSection(e)}hasSectionId(e){return this.hasSection(I.SECTION_ID_NAME_MAP.get(e))}deleteSection(e){this.cmpApiContext.gppModel.deleteSection(e)}deleteSectionById(e){this.deleteSection(I.SECTION_ID_NAME_MAP.get(e))}clear(){this.cmpApiContext.gppModel.clear()}getObject(){return this.cmpApiContext.gppModel.toObject()}getGvlFromVendorList(e){return se.fromVendorList(e)}async getGvlFromUrl(e){return se.fromUrl(e)}}const me="__gppLocator",Le=s=>{if(!window.frames[s])if(window.document.body){const e=window.document.createElement("iframe");e.style.cssText="display:none",e.name=s,window.document.body.appendChild(e)}else setTimeout(Le,5)},it=s=>{let e=window,t;for(;e;){try{if(e.frames[s]){t=e;break}}catch{}if(e===window.top)break;e=e.parent}return t},rt=s=>typeof s=="object"&&s!=null&&"__gppCall"in s,ot=()=>{const s=[],e=[];let t;const n=(r,o,S,d)=>{if(r==="queue")return s;if(r==="events")return e;const p={gppVersion:"1.1",cmpStatus:X.STUB,cmpDisplayStatus:Y.HIDDEN,signalStatus:x.NOT_READY,supportedAPIs:[],cmpId:0,sectionList:[],applicableSections:[0],gppString:"",parsedSections:{}};if(r==="ping")o(p,!0);else if(r==="addEventListener"){t||(t=0),t+=1;const m=t;e.push({id:m,callback:o,parameter:S}),o({eventName:"listenerRegistered",listenerId:m,data:!0,pingData:p},!0)}else if(r==="removeEventListener"){let m=!1;for(let f=0;f<e.length;f++)if(e[f].id===S){e.splice(f,1),m=!0;break}o({eventName:"listenerRemoved",listenerId:S,data:m,pingData:p},!0)}else r==="hasSection"?o(!1,!0):r==="getSection"||r==="getField"?o(null,!0):s.push([].slice.apply([r,o,S,d]));return null},i=r=>{const o=typeof r.data=="string";let S={};if(o)try{S=JSON.parse(r.data)}catch{S={}}else S=r.data;if(!rt(S))return null;if(S.__gppCall&&window.__gpp){const d=S.__gppCall;window.__gpp(d.command,(p,m)=>{const f={__gppReturn:{returnValue:p,success:m,callId:d.callId}};r&&r.source&&r.source.postMessage&&r.source.postMessage(o?JSON.stringify(f):f,"*")},"parameter"in d?d.parameter:void 0,"version"in d?d.version:"1.1")}return null};it(me)||(Le(me),window.__gpp=n,window.addEventListener("message",i,!1))};var lt=(s=>(s.CONSENT="Consent",s.CONTRACT="Contract",s.LEGAL_OBLIGATIONS="Legal obligations",s.VITAL_INTERESTS="Vital interests",s.PUBLIC_INTEREST="Public interest",s.LEGITIMATE_INTERESTS="Legitimate interests",s))(lt||{}),pe=(s=>(s.CONSENT="Consent",s.LEGITIMATE_INTERESTS="Legitimate interests",s))(pe||{});const Ve=407,at=",",St=[{experienceKey:"tcf_purpose_consents",tcfModelKey:"purposeConsents",enabledIdsKey:"purposesConsent"},{experienceKey:"tcf_purpose_legitimate_interests",tcfModelKey:"purposeLegitimateInterests",enabledIdsKey:"purposesLegint"},{experienceKey:"tcf_special_features",tcfModelKey:"specialFeatureOptins",enabledIdsKey:"specialFeatures"},{experienceKey:"tcf_vendor_consents",tcfModelKey:"vendorConsents",enabledIdsKey:"vendorsConsent"},{experienceKey:"tcf_vendor_legitimate_interests",tcfModelKey:"vendorLegitimateInterests",enabledIdsKey:"vendorsLegint"}];St.filter(({experienceKey:s})=>s!=="tcf_features"&&s!=="tcf_special_purposes").map(s=>s.experienceKey),pe.CONSENT.toString(),pe.LEGITIMATE_INTERESTS.toString();const Et=s=>{if(!window.Fides.options.fidesTcfGdprApplies)return null;const{fides_string:e}=s.detail;if(e){const[t]=e.split(at);return t.split(".")[0]}return e??""};var Ge;(s=>{(e=>(e[e._0=0]="_0",e[e._1=1]="_1"))(s.IABTCFgdprApplies||(s.IABTCFgdprApplies={})),(e=>(e[e._0=0]="_0",e[e._1=1]="_1"))(s.IABTCFPurposeOneTreatment||(s.IABTCFPurposeOneTreatment={})),(e=>(e[e._0=0]="_0",e[e._1=1]="_1"))(s.IABTCFUseNonStandardTexts||(s.IABTCFUseNonStandardTexts={}))})(Ge||(Ge={}));var ct=(s=>(s.GPP_US_NATIONAL="gpp_us_national",s.GPP_US_STATE="gpp_us_state",s))(ct||{}),dt=(s=>(s.FRONTEND="frontend",s.SYSTEM_WIDE="system_wide",s.NOT_APPLICABLE="not_applicable",s))(dt||{}),_t=(s=>(s.OPT_IN="opt_in",s.OPT_OUT="opt_out",s.NOTICE_ONLY="notice_only",s))(_t||{}),Ue=(s=>(s.OPT_IN="opt_in",s.OPT_OUT="opt_out",s.ACKNOWLEDGE="acknowledge",s.TCF="tcf",s))(Ue||{}),ve=(s=>(s.OVERLAY="overlay",s.BANNER_AND_MODAL="banner_and_modal",s.MODAL="modal",s.PRIVACY_CENTER="privacy_center",s.TCF_OVERLAY="tcf_overlay",s))(ve||{}),gt=(s=>(s.ALWAYS_ENABLED="always_enabled",s.ENABLED_WHERE_REQUIRED="enabled_where_required",s.ALWAYS_DISABLED="always_disabled",s))(gt||{}),ut=(s=>(s.OPTIONS="options",s.EXPERIENCE_TRANSLATION="language",s))(ut||{}),ht=(s=>(s.PRIMARY="primary",s.SECONDARY="secondary",s.TERTIARY="tertiary",s))(ht||{}),Tt=(s=>(s.BUTTON="button",s.REJECT="reject",s.ACCEPT="accept",s.SAVE="save",s.DISMISS="dismiss",s.GPC="gpc",s.INDIVIDUAL_NOTICE="individual_notice",s))(Tt||{}),pt=(s=>(s.privacy_center="privacy_center",s.overlay="overlay",s.api="api",s))(pt||{}),Ot=(s=>(s.NONE="none",s.APPLIED="applied",s.OVERRIDDEN="overridden",s))(Ot||{}),Nt=(s=>(s.OVERLAY="overlay",s.MODAL="modal",s.BANNER="banner",s.PRIVACY_CENTER="privacy_center",s.TCF_OVERLAY="tcf_overlay",s.TCF_BANNER="tcf_banner",s))(Nt||{});const It=(s,e)=>!!Object.keys(e).includes(s.notice_key),ie=s=>!s||typeof s!="object"?!1:Object.keys(s).length===0||"id"in s,be=s=>!!(s&&s.every(e=>e.default_preference===Ue.OPT_IN)),At=(s,e,t)=>{var n,i,r;return((n=s.experience_config)==null?void 0:n.component)===ve.TCF_OVERLAY?(i=s.meta)!=null&&i.version_hash?s.meta.version_hash!==e.tcf_version_hash:!0:s?.privacy_notices==null||s.privacy_notices.length===0?!1:t?!((r=s.privacy_notices)!=null&&r.every(o=>It(o,t))):!0};var te=(s=>(s.NATIONAL="national",s.STATE="state",s))(te||{});const ye={us:{name:A.NAME,id:A.ID,prefix:"usnat"},us_ca:{name:C.NAME,id:C.ID,prefix:"usca"},us_ct:{name:M.NAME,id:M.ID,prefix:"usct"},us_co:{name:R.NAME,id:R.ID,prefix:"usco"},us_ut:{name:w.NAME,id:w.ID,prefix:"usut"},us_va:{name:D.NAME,id:D.ID,prefix:"usva"}},xe=({cmpApi:s,sectionName:e,gppSettings:t})=>{t&&[{gppSettingField:t.mspa_covered_transactions,cmpApiField:c.MSPA_COVERED_TRANSACTION},{gppSettingField:t.mspa_opt_out_option_mode,cmpApiField:c.MSPA_OPT_OUT_OPTION_MODE},{gppSettingField:t.mspa_service_provider_mode,cmpApiField:c.MSPA_SERVICE_PROVIDER_MODE}].forEach(({gppSettingField:n,cmpApiField:i})=>{s.setFieldValue(e,i,n?1:2)})},Be=({experienceRegion:s,usApproach:e})=>e===te.NATIONAL?"us":s,Fe=({cmpApi:s,experience:e})=>{var t;const n=new Set,{privacy_notices:i=[],region:r,gpp_settings:o}=e,S=Be({experienceRegion:r,usApproach:o?.us_approach}),d=ye[S];return d?(n.add(d),i.forEach(p=>{var m;const{gpp_field_mapping:f}=p,b=(m=f?.find(j=>j.region===S))==null?void 0:m.notice;b&&b.forEach(j=>{s.setFieldValue(d.name,j,1)})}),xe({cmpApi:s,sectionName:d.name,gppSettings:o}),Array.from(n)):((t=e?.gpp_settings)==null?void 0:t.us_approach)===te.STATE?(s.setApplicableSections([-1]),[]):[]},He=({cmpApi:s,cookie:e,experience:t})=>{var n,i;const r=new Set,{consent:o}=e,S=Be({experienceRegion:t.region,usApproach:(n=t.gpp_settings)==null?void 0:n.us_approach}),d=ye[S];return d?(r.add(d),Object.keys(o).forEach(p=>{var m,f;const b=(m=t.privacy_notices)==null?void 0:m.find(le=>le.notice_key===p),j=o[p];if(b){const{gpp_field_mapping:le}=b,Oe=(f=le?.find(Q=>Q.region===S))==null?void 0:f.mechanism;Oe&&Oe.forEach(Q=>{let ne=Q.not_available;j===!1?ne=Q.opt_out:j&&(ne=Q.not_opt_out);let Ne=+ne;ne.length>1&&(Ne=ne.split("").map(We=>+We)),s.setFieldValue(d.name,Q.field,Ne)})}}),xe({cmpApi:s,sectionName:d.name,gppSettings:t.gpp_settings}),Array.from(r)):((i=t?.gpp_settings)==null?void 0:i.us_approach)===te.STATE?(s.setApplicableSections([-1]),[]):[]},ft=1,ke=(s,e,t)=>s?e?!0:!!(t&&Object.entries(s).some(([n,i])=>n in t.map(r=>r.notice_key)&&i!==void 0)):!1,Ye=(s,e)=>{if(!ie(window.Fides.experience))return!1;const{gpp_settings:t}=window.Fides.experience;if(!window.Fides.options.tcfEnabled||!(t!=null&&t.enable_tcfeu_string))return!1;const n=Et(s);return n?(e.setFieldValueBySectionId(N.ID,"CmpId",Ve),e.setSectionStringById(N.ID,n),!0):!1},Pt=()=>{const s=[];if(ie(window.Fides.experience)){const{gpp_settings:e}=window.Fides.experience;e&&e.enabled&&(window.Fides.options.tcfEnabled&&e.enable_tcfeu_string&&s.push(`${N.ID}:${N.NAME}`),e.us_approach===te.NATIONAL&&s.push(`${A.ID}:${A.NAME}`),e.us_approach===te.STATE&&[C,R,M,w,D].forEach(t=>{s.push(`${t.ID}:${t.NAME}`)}))}return s},Ke=()=>{ot();const s=new nt(Ve,ft);s.setCmpStatus(X.LOADED),window.addEventListener("FidesInitialized",e=>{const{experience:t,saved_consent:n}=window.Fides;if(s.setSupportedAPIs(Pt()),ie(t)&&(!At(t,e.detail,n)||be(t.privacy_notices)&&!ke(n,e.detail.fides_string,t.privacy_notices))){Ye(e,s)&&s.setApplicableSections([N.ID]),Fe({cmpApi:s,experience:t});const i=He({cmpApi:s,cookie:e.detail,experience:t});i.length&&s.setApplicableSections(i.map(r=>r.id)),s.setSignalStatus(x.READY)}}),window.addEventListener("FidesUIShown",e=>{const{experience:t,saved_consent:n}=window.Fides;if(ie(t)){be(t.privacy_notices)&&!ke(n,e.detail.fides_string,t.privacy_notices)?s.setSignalStatus(x.READY):s.setSignalStatus(x.NOT_READY),s.setCmpDisplayStatus(Y.VISIBLE);const i=Fe({cmpApi:s,experience:t});i.length&&s.setApplicableSections(i.map(r=>r.id))}}),window.addEventListener("FidesModalClosed",e=>{e.detail.extraDetails&&e.detail.extraDetails.saved===!1&&(s.setCmpDisplayStatus(Y.HIDDEN),s.setSignalStatus(x.READY))}),window.addEventListener("FidesUpdated",e=>{if(s.setCmpDisplayStatus(Y.HIDDEN),Ye(e,s)&&(s.setApplicableSections([N.ID]),s.fireSectionChange("tcfeuv2")),ie(window.Fides.experience)){const t=He({cmpApi:s,cookie:e.detail,experience:window.Fides.experience});t.length&&(s.setApplicableSections(t.map(n=>n.id)),t.forEach(n=>{s.fireSectionChange(n.name)}))}s.setSignalStatus(x.READY)})};Ke();export{Ke as initializeGppCmpApi};
//# sourceMappingURL=fides-ext-gpp.js.map
